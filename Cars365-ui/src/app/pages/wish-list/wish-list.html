<div class="mb-5">
  <h2 class="mb-4 text-center fw-bold">
    <i class="bi bi-heart-fill text-danger"></i>
    My Wishlist
  </h2>

  @if (loading) {
    <div class="row g-4">
      @for (i of [1,2,3,4,5,6]; track i) {
        <div class="col-md-6 col-lg-4">
          <div class="card h-100 shadow border-0 car-card skeleton-card">

            <!-- Image Skeleton -->
            <div class="skeleton-image"></div>

            <div class="card-body">
              <!-- Title + Price -->
              <div class="d-flex justify-content-between mb-2">
                <div class="skeleton-text title"></div>
                <div class="skeleton-text price"></div>
              </div>

              <!-- Pills -->
              <div class="d-flex gap-2">
                <div class="skeleton-pill"></div>
                <div class="skeleton-pill"></div>
              </div>
            </div>

            <div class="card-footer bg-white border-0">
              <div class="skeleton-button"></div>
            </div>

          </div>
        </div>
      }
    </div>
  } @else {

    @if (wishlistCars.length === 0) {
      <div class="alert alert-info text-center">
        Your wishlist is empty ðŸ’”
      </div>
    } @else {

      <div class="row g-4">
        @for (car of wishlistCars; track car.id) {

          <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow border-0 car-card">

              <!-- Image -->
              <div class="position-relative">
                <img
                  [src]="getImageUrl(car.imageUrl)"
                  class="card-img-top"
                  alt="Car image"
                />

                <!-- Car Type -->
                <span class="badge bg-success position-absolute top-0 end-0 m-2">
                  {{ car.type }}
                </span>

                <!-- Cars365 Guaranteed -->
                <span class="badge bg-primary position-absolute bottom-0 start-0 m-2">
                  Cars365 Guaranteed
                </span>

                <!-- Wishlist Button -->
                <button
                  class="wishlist-btn"
                  (click)="toggleWishlist(car.id)"
                >
                  <i
                    class="bi"
                    [ngClass]="isWishlisted(car.id) ? 'bi-heart-fill text-danger' : 'bi-heart'"
                  ></i>
                </button>
              </div>

              <!-- Body -->
              <div class="card-body">

                <!-- Title + Price -->
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h5 class="fw-semibold mb-0">
                    {{ car.year }} {{ car.brand }} {{ car.model }}
                  </h5>

                  <span class="fw-bold text-primary fs-6">
                    â‚¹ {{ formatPrice(car.price) }}
                  </span>
                </div>

                <!-- Fuel & Transmission Pills -->
                <div class="d-flex gap-2">
                  <span class="badge rounded-pill bg-light text-dark border">
                    {{ car.fuelType }}
                  </span>

                  <span class="badge rounded-pill bg-light text-dark border">
                    {{ car.transmission }}
                  </span>
                </div>

              </div>

              <!-- Footer -->
              <div class="card-footer bg-white border-0 text-center mb-2">
                @if (isAdmin) {
                  <div class="d-flex gap-2">
                    <button
                      class="btn btn-outline-primary btn-sm w-50"
                      [routerLink]="['/admin/edit', car.id]">
                      <i class="bi bi-pencil"></i> Edit
                    </button>

                    <button
                      class="btn btn-outline-danger btn-sm w-50"
                      (click)="deleteCar(car.id)">
                      <i class="bi bi-trash"></i> Delete
                    </button>
                  </div>
                } @else {
                  <button class="btn btn-outline-primary btn-sm w-100" [routerLink]="['/cars', car.id]">
                    View Details
                  </button>
                }
              </div>

            </div>
          </div>

        }
      </div>

    }
  }

</div>
